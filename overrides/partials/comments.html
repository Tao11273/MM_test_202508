<h2 id="__comments">评论</h2>
<script src="https://giscus.app/client.js"
        data-repo="Tao11273/MM_test_202508"
        data-repo-id="R_kgDOPklBag"
        data-category="Announcements"
        data-category-id="DIC_kwDOPklBas4Cu003"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>

<!-- 同步 Giscus 主题和 Material 主题 -->
<script>
var giscus = document.querySelector("script[src*=giscus]")

// 初始加载时设置主题
var palette = __md_get("__palette")
if (palette && typeof palette.color === "object") {
  var theme = palette.color.scheme === "slate"
    ? "dark_protanopia"
    : "light_protanopia"
  giscus.setAttribute("data-theme", theme)
}

// 注册监听器，跟随主题切换
document.addEventListener("DOMContentLoaded", function() {
  var ref = document.querySelector("[data-md-component=palette]")
  if (ref) {
    ref.addEventListener("change", function() {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate"
          ? "dark_protanopia"
          : "light_protanopia"
        var frame = document.querySelector(".giscus-frame")
        if (frame) {
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      }
    })
  }
})
</script>
